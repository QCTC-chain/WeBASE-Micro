DROP DATABASE IF EXISTS `webase-config`;

CREATE DATABASE  `webase-config` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

USE `webase-config`;

/******************************************/
/*   表名称 = config_info   */
/******************************************/
CREATE TABLE `config_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) NOT NULL COMMENT 'data_id',
  `group_id` varchar(255) DEFAULT NULL,
  `content` longtext NOT NULL COMMENT 'content',
  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',
  `src_user` text COMMENT 'source user',
  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',
  `app_name` varchar(128) DEFAULT NULL,
  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',
  `c_desc` varchar(256) DEFAULT NULL,
  `c_use` varchar(64) DEFAULT NULL,
  `effect` varchar(64) DEFAULT NULL,
  `type` varchar(64) DEFAULT NULL,
  `c_schema` text,
  `encrypted_data_key` text COMMENT '秘钥',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info';

insert into config_info(id, data_id, group_id, content, md5, gmt_create, gmt_modified, src_user, src_ip, app_name, tenant_id, c_desc, c_use, effect, type, c_schema, encrypted_data_key) values
(1, 'application-common.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:18:55', '2022-01-09 15:18:55', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '通用配置基础配置', NULL, NULL, 'yaml', NULL, ''),
(2, 'datasource.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:19:07', '2022-01-09 15:19:07', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '数据源配置', NULL, NULL, 'yaml', NULL, ''),
(3, 'webase-gateway.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:19:43', '2022-01-09 15:22:42', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '网关模块', NULL, NULL, 'yaml', NULL, ''),
(4, 'webase-auth.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:19:43', '2022-01-09 15:22:29', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '认证中心', NULL, NULL, 'yaml', NULL, ''),
(5, 'webase-monitor.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:15', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '监控中心', NULL, NULL, 'yaml', NULL, ''),
(6, 'webase-system.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '系统模块', NULL, NULL, 'yaml', NULL, ''),
(7, 'webase-gen.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:21:51', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '代码生成', NULL, NULL, 'yaml', NULL, ''),
(8, 'webase-job.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:21:36', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '定时任务', NULL, NULL, 'yaml', NULL, ''),
(9, 'webase-resource.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:35', '2022-01-09 15:21:21', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '文件服务', NULL, NULL, 'yaml', NULL, ''),
(10, 'sentinel-webase-gateway.json', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:21:02', '2022-01-09 15:21:02', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '限流策略', NULL, NULL, 'json', NULL, ''),
(11, 'webase-xxl-job-admin.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:21:02', '2022-01-09 15:21:02', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '定时任务控制台', NULL, NULL, 'yaml', NULL, ''),
(12, 'seata-server.properties', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:21:02', '2022-01-09 15:21:02', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'seata配置文件', NULL, NULL, 'properties', NULL, ''),
(13, 'webase-sentinel-dashboard.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:21:02', '2022-01-09 15:21:02', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'sentinel控制台配置文件', NULL, NULL, 'yaml', NULL, ''),
(14, 'webase-host-mgr.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', '主机管理模块', NULL, NULL, 'yaml', NULL, ''),
(15, 'bcos-node-mgr.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'bcos节点管理模块', NULL, NULL, 'yaml', NULL, ''),
(16, 'bcos-sign.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'bcos签名模块(v1.5.5)', NULL, NULL, 'yaml', NULL, ''),
(17, 'bcos3-node-mgr.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'bcos3.x 节点管理模块', NULL, NULL, 'yaml', NULL, ''),
(18, 'bcos3-sign.yml', 'DEFAULT_GROUP', '# 将项目路径：config/下对应文件中内容复制到此处', '2944a25cb97926efcaa43b3ad7a64cf0', '2022-01-09 15:20:18', '2022-01-09 15:22:03', NULL, '0:0:0:0:0:0:0:1', '', 'dev', 'bcos3.x 签名模块', NULL, NULL, 'yaml', NULL, ''),

(101, 'application-common.yml', 'DEFAULT_GROUP', 'server:\n  # undertow 配置\n  undertow:\n    # HTTP post内容的最大大小。当值为-1时，默认值为大小是无限的\n    max-http-post-size: -1\n    # 以下的配置会影响buffer,这些buffer会用于服务器连接的IO操作,有点类似netty的池化内存管理\n    # 每块buffer的空间大小,越小的空间被利用越充分\n    buffer-size: 512\n    # 是否分配的直接内存\n    direct-buffers: true\n    threads:\n      # 设置IO线程数, 它主要执行非阻塞的任务,它们会负责多个连接, 默认设置每个CPU核心一个线程\n      io: 8\n      # 阻塞任务线程池, 当执行类似servlet请求阻塞操作, undertow会从这个线程池中取得线程,它的值设置取决于系统的负载\n      worker: 256\n\ndubbo:\n  application:\n    logger: slf4j\n    # 元数据中心 local 本地 remote 远程 这里使用远程便于其他服务获取\n    metadataType: remote\n    # 可选值 interface、instance、all，默认是 all，即接口级地址、应用级地址都注册\n    register-mode: all\n    service-discovery:\n      # FORCE_INTERFACE，只消费接口级地址，如无地址则报错，单订阅 2.x 地址\n      # APPLICATION_FIRST，智能决策接口级/应用级地址，双订阅\n      # FORCE_APPLICATION，只消费应用级地址，如无地址则报错，单订阅 3.x 地址\n      migration: FORCE_APPLICATION\n    qos-enable: false\n  protocol:\n    # 设置为 tri 即可使用 Triple 3.0 新协议\n    # 性能对比 dubbo 协议并没有提升 但基于 http2 用于多语言异构等 http 交互场景\n    # 使用 dubbo 协议通信\n    name: dubbo\n    # dubbo 协议端口(-1表示自增端口,从20880开始)\n    port: -1\n    # 指定dubbo协议注册ip\n    # host: 192.168.0.100\n  # 注册中心配置\n  registry:\n    address: nacos://${spring.cloud.nacos.server-addr}\n    group: DUBBO_GROUP\n    parameters:\n      namespace: ${spring.profiles.active}\n  # 消费者相关配置\n  consumer:\n    # 结果缓存(LRU算法)\n    # 会有数据不一致问题 建议在注解局部开启\n    cache: false\n    # 支持校验注解\n    validation: true\n    # 超时时间\n    timeout: 3000\n    # 初始化检查\n    check: false\n  scan:\n    # 接口实现类扫描\n    base-packages: com.webank.**.dubbo\n  # 自定义配置\n  custom:\n    # 全局请求log\n    request-log: true\n    # info 基础信息 param 参数信息 full 全部\n    log-level: info\n\nspring:\n  # 资源信息\n  messages:\n    # 国际化资源文件路径\n    basename: i18n/messages\n  servlet:\n    multipart:\n      # 整个请求大小限制\n      max-request-size: 20MB\n      # 上传单个文件大小限制\n      max-file-size: 10MB\n  mvc:\n    format:\n      date-time: yyyy-MM-dd HH:mm:ss\n  #jackson配置\n  jackson:\n    # 日期格式化\n    date-format: yyyy-MM-dd HH:mm:ss\n    serialization:\n      # 格式化输出\n      INDENT_OUTPUT: false\n      # 忽略无法转换的对象\n      fail_on_empty_beans: false\n    deserialization:\n      # 允许对象忽略json中不存在的属性\n      fail_on_unknown_properties: false\n  cloud:\n    # sentinel 配置\n    sentinel:\n      # sentinel 开关\n      enabled: true\n      # 取消控制台懒加载\n      eager: true\n      transport:\n        # dashboard控制台服务名 用于服务发现\n        # 如无此配置将默认使用下方 dashboard 配置直接注册\n        server-name: webase-sentinel-dashboard\n        # 客户端指定注册的ip 用于多网卡ip不稳点使用\n        # client-ip:\n        # 控制台地址 从1.3.0开始使用 server-name 注册\n        # dashboard: localhost:8718\n\n  # redis通用配置 子服务可以自行配置进行覆盖\n  redis:\n    host: redis\n    port: 6379\n    # 密码(如没有密码请注释掉)\n    password: webase123\n    database: 0\n    timeout: 10s\n    ssl: false\n\n# redisson 配置\nredisson:\n  # redis key前缀\n  keyPrefix:\n  # 线程池数量\n  threads: 4\n  # Netty线程池数量\n  nettyThreads: 8\n  # 单节点配置\n  singleServerConfig:\n    # 客户端名称\n    clientName: ${spring.application.name}\n    # 最小空闲连接数\n    connectionMinimumIdleSize: 8\n    # 连接池大小\n    connectionPoolSize: 32\n    # 连接空闲超时，单位：毫秒\n    idleConnectionTimeout: 10000\n    # 命令等待超时，单位：毫秒\n    timeout: 3000\n    # 发布和订阅连接池大小\n    subscriptionConnectionPoolSize: 50\n\n# 分布式锁 lock4j 全局配置\nlock4j:\n  # 获取分布式锁超时时间，默认为 3000 毫秒\n  acquire-timeout: 3000\n  # 分布式锁的超时时间，默认为 30 秒\n  expire: 30000\n\n# 暴露监控端点\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: \'*\'\n  endpoint:\n    health:\n      show-details: ALWAYS\n    logfile:\n      external-file: ./logs/${spring.application.name}/console.log\n\n# 日志配置\nlogging:\n  level:\n    org.springframework: warn\n    org.apache.dubbo: warn\n    com.alibaba.nacos: warn\n  config: classpath:logback-plus.xml\n\n# Sa-Token配置\nsa-token:\n  # token名称 (同时也是cookie名称)\n  token-name: Authorization\n  # token有效期 设为一天 (必定过期) 单位: 秒\n  timeout: 86400\n  # 多端不同 token 有效期 可查看 LoginHelper.loginByDevice 方法自定义\n  # token最低活跃时间 (指定时间无操作就过期) 单位: 秒\n  active-timeout: 1800\n  # 开启内网服务调用鉴权\n  check-same-token: false\n  # Same-Token的有效期 (单位: 秒)(默认一天）\n  # same-token-timeout: 600\n  # 是否允许同一账号并发登录 (为true时允许一起登录, 为false时新登录挤掉旧登录)\n  is-concurrent: true\n  # 在多人登录同一账号时，是否共用一个token (为true时所有登录共用一个token, 为false时每次登录新建一个token)\n  is-share: false\n  # 是否尝试从header里读取token\n  is-read-header: true\n  # 是否尝试从cookie里读取token\n  is-read-cookie: false\n  # token前缀\n  token-prefix: \"Bearer\"\n  # jwt秘钥\n  jwt-secret-key: abcdefghijklmnopqrstuvwxyz\n\n# MyBatisPlus配置\n# https://baomidou.com/config/\nmybatis-plus:\n  # 不支持多包, 如有需要可在注解配置 或 提升扫包等级\n  # 例如 com.**.**.mapper\n  mapperPackage: com.webank.**.mapper\n  # 对应的 XML 文件位置\n  mapperLocations: classpath*:mapper/**/*Mapper.xml\n  # 实体扫描，多个package用逗号或者分号分隔\n  typeAliasesPackage: com.webank.**.domain\n  # 启动时是否检查 MyBatis XML 文件的存在，默认不检查\n  checkConfigLocation: false\n  configuration:\n    # 自动驼峰命名规则（camel case）映射\n    mapUnderscoreToCamelCase: true\n    # MyBatis 自动映射策略\n    # NONE：不启用 PARTIAL：只对非嵌套 resultMap 自动映射 FULL：对所有 resultMap 自动映射\n    autoMappingBehavior: PARTIAL\n    # MyBatis 自动映射时未知列或未知属性处理策\n    # NONE：不做处理 WARNING：打印相关警告 FAILING：抛出异常和详细信息\n    autoMappingUnknownColumnBehavior: NONE\n    # 更详细的日志输出 会有性能损耗 org.apache.ibatis.logging.stdout.StdOutImpl\n    # 关闭日志记录 (可单纯使用 p6spy 分析) org.apache.ibatis.logging.nologging.NoLoggingImpl\n    # 默认日志输出 org.apache.ibatis.logging.slf4j.Slf4jImpl\n    logImpl: org.apache.ibatis.logging.nologging.NoLoggingImpl\n  global-config:\n    # 是否打印 Logo banner\n    banner: true\n    dbConfig:\n      # 主键类型\n      # AUTO 自增 NONE 空 INPUT 用户输入 ASSIGN_ID 雪花 ASSIGN_UUID 唯一 UUID\n      idType: ASSIGN_ID\n      # 逻辑已删除值\n      logicDeleteValue: 2\n      # 逻辑未删除值\n      logicNotDeleteValue: 0\n      insertStrategy: NOT_NULL\n      updateStrategy: NOT_NULL\n      where-strategy: NOT_NULL\n\n# 数据加密\nmybatis-encryptor:\n  # 是否开启加密\n  enable: false\n  # 默认加密算法\n  algorithm: BASE64\n  # 编码方式 BASE64/HEX。默认BASE64\n  encode: BASE64\n  # 安全秘钥 对称算法的秘钥 如：AES，SM4\n  password:\n  # 公私钥 非对称算法的公私钥 如：SM2，RSA\n  publicKey:\n  privateKey:\n\nspringdoc:\n  api-docs:\n    # 是否开启接口文档\n    enabled: true\n#  swagger-ui:\n#    # 持久化认证数据\n#    persistAuthorization: true\n  info:\n    # 标题\n    title: \'标题：WeBASE-Micro微服务管理系统\'\n    # 描述\n    description: \'描述：WeBASE-Micro微服务管理系统.\'\n    # 版本\n    version: \'版本号：系统版本v1.0.0\'\n    # 作者信息\n    contact:\n      name: WeBASE\n#      email: xxx@qctc.com.cn\n#      url: https://github.com/WeBASE-Micro\n  components:\n    # 鉴权方式配置\n    security-schemes:\n      apiKey:\n        type: APIKEY\n        in: HEADER\n        name: ${sa-token.token-name}\n  # 服务文档路径映射 参考 gateway router 配置\n  # 默认为服务名去除前缀转换为path 此处填特殊的配置\n  service-mapping:\n    webase-gen: /code\n\n# seata配置\nseata:\n  # 默认关闭，如需启用spring.datasource.dynami.seata需要同时开启\n  enabled: true\n  # Seata 应用编号，默认为 ${spring.application.name}\n  application-id: ${spring.application.name}\n  # Seata 事务组编号，用于 TC 集群名\n  tx-service-group: ${spring.application.name}-group\n  config:\n    type: nacos\n    nacos:\n      server-addr: ${spring.cloud.nacos.server-addr}\n      group: ${spring.cloud.nacos.config.group}\n      namespace: ${spring.profiles.active}\n      data-id: seata-server.properties\n  registry:\n    type: nacos\n    nacos:\n      application: webase-seata-server\n      server-addr: ${spring.cloud.nacos.server-addr}\n      group: ${spring.cloud.nacos.discovery.group}\n      namespace: ${spring.profiles.active}\n\n# 部署主机配置\nhost-mgr:\n  ssh-rsa: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDGJ1fXigqkRYNDsZGXPuab3o4yVJBXhKXwPKdumtrV6INav4Kpa4qTt4rW20z0eXaPTJYGY7PhtDNCJgXorYyB1Xfwr9Xs2unnhtoiLRuOEZXF6tSeFIQsolGmzdV5pkg2ctjZ1K4GNbHdljLq5ouOzR1LneceRV/+54tEymc6hWjRX2MozQv1MpTL2+Y8ezhHBvrECl/XKaTrjZQ2J4F5kABE2ZMfjdfOEjKy1EEMo6GCzR+1nQUdRGBroMcyIE8/9d6J0EEmjqZqikaqlJ9ef2lcxW+Gtfs5e0Rb0TT8s6YbyN1qqlgOUkbUUyY0J4nLtV3ZwH5Z8l1sD6dYEWLP root@buildkitsandbox\n  ssh-key: |\n    -----BEGIN RSA PRIVATE KEY-----\n    MIIEpAIBAAKCAQEAxidX14oKpEWDQ7GRlz7mm96OMlSQV4Sl8Dynbpra1eiDWr+C\n    qWuKk7eK1ttM9Hl2j0yWBmOz4bQzQiYF6K2MgdV38K/V7Nrp54baIi0bjhGVxerU\n    nhSELKJRps3VeaZINnLY2dSuBjWx3ZYy6uaLjs0dS53nHkVf/ueLRMpnOoVo0V9j\n    KM0L9TKUy9vmPHs4Rwb6xApf1ymk642UNieBeZAARNmTH43XzhIystRBDKOhgs0f\n    tZ0FHURga6DHMiBPP/XeidBBJo6maopGqpSfXn9pXMVvhrX7OXtEW9E0/LOmG8jd\n    aqpYDlJG1FMmNCeJy7Vd2cB+WfJdbA+nWBFizwIDAQABAoIBAE7V9FLirt0wcssJ\n    6Jy9/83fu782eb74HXT5DLwqjAoy2Z/PNdLl4Fpo2aol0fYqJQtaMw4TuMuBgCs/\n    KXarJY26Ol/d9USozAq7UinqvF3HjUkS5siF7Rg89DNjDR27FFvlUXVI8nux/TPl\n    wBhI5RlJbfBZwEwA2fJ2eKhDxtI28SIZoNX3TuJTHdeoJXYOH3m8y8+iBnA3JTx3\n    odqvbPQQkvaBGirS+iiVywygrH0zREdfmFXX8SOAqhp4npVRf68dRWw3JWa4n3Kj\n    qxJ3tBspH0z7+pxmbzAxUhrlnIUz4C5EkIHbv+qCbzCYL9sFzGy3TQyrx5X76yB0\n    XNKvIvECgYEA/yU8g5mMjBh7SG/+UTnnPwuETVq+i272xfLyPKVFvqleDBdAFDjT\n    8YDtvXAkHtKmcnQsiWNDX06FGbqdFnFHBkgq/PV4Bd7isjtnqiAea0qPPoTrSTzi\n    mt/esa74zNqE1KdOpso9Z6JIL4ysZlv08VCwPZDzfn6f+bfqDEBsaZsCgYEAxtE9\n    2DMs5NsbFsNyoZNNcbQJQA1IFBXoFMxghx9K0cL2/sVtgOeoULwqzeAis4SC+Muh\n    CqxIQoL95opX3IYEaplfCF3PCSE+NEjeGlSXZynSGXbB0vKcLrP5Meyll+urFWA+\n    m/dQbeVtpol/lwc162tzdyf67S9PyVuXdwKOKN0CgYEA80Z15KTLtejB49elDZ3A\n    OASrKXaUqC4tbaCwB9MuJRUoby7cEmv86hCcnjwGtLz1p7vNm1HiM0WS821TyspH\n    hl3ZX0hOIIrcbEToGvZ1CqgU3O+vyC0dg75hf9ntsKXKcVj1TWMYGXBKk8v1tcOI\n    UW82G/3RrZLexiPuLbBfrnECgYEAkT4pBPmV0XazmnScGKeoyujwXQeW4X2DdzY7\n    Sls06HqawFJwhdw2nQxp5M7Z6vViTOlNs6NagqR5YeMs/qA1N77lqxIE/rF3ZPDa\n    uLeVh7sIjquwOzAbow69fJhZ/Nsgt9QAySXqbu5NpX0LZcTRwjNUPfdKG94VVo9/\n    3mRSgE0CgYBhpPX6oftuqrbaGGFuegED7g0u9fDFZpHC3OPUdp7T++cgMpWnBFmg\n    DI8hCiVuMoKiPbMfcO5LBqiw7DyudnUZ395KtGKnsLXHq169gDfn6v7ry2/elpr7\n    C7GHNm7kmHGVNwf9dES2v055A7KNa9IXg+x83G9Ibzuhy0/qqzSTug==\n    -----END RSA PRIVATE KEY-----\n', '2c8d92861fba30168f8c739e6a3b3092', '2022-01-09 15:23:00', '2024-05-17 08:37:36', 'nacos', '192.168.12.45', '', 'prod', '通用配置基础配置', '', '', 'yaml', '', ''),
(102, 'datasource.yml', 'DEFAULT_GROUP', 'datasource:\n  system-master:\n    # jdbc 所有参数配置参考 https://lionli.blog.csdn.net/article/details/122018562\n    # rewriteBatchedStatements=true 批处理优化 大幅提升批量插入更新删除性能\n    url: jdbc:mysql://mysql:3306/webase-cloud?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n  host-master:\n    # rewriteBatchedStatements=true 批处理优化 大幅提升批量插入更新删除性能\n    url: jdbc:mysql://mysql:3306/webase-host?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n  bcos3-node-master:\n    # rewriteBatchedStatements=true 批处理优化 大幅提升批量插入更新删除性能\n    url: jdbc:mysql://mysql:3306/webasenodemanager3?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n  bcos3-sign-master:\n    # rewriteBatchedStatements=true 批处理优化 大幅提升批量插入更新删除性能\n    url: jdbc:mysql://mysql:3306/webasesign3?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n  gen:\n    url: jdbc:mysql://mysql:3306/webase-cloud?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n  job:\n    url: jdbc:mysql://mysql:3306/webase-job?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\n    username: root\n    password: webase123\n#  system-oracle:\n#    url: jdbc:oracle:thin:@//localhost:1521/XE\n#    username: ROOT\n#    password: password\n#  system-postgres:\n#    url: jdbc:postgresql://localhost:5432/postgres?useUnicode=true&characterEncoding=utf8&useSSL=true&autoReconnect=true&reWriteBatchedInserts=true\n#    username: root\n#    password: password\n\nspring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    # 动态数据源文档 https://www.kancloud.cn/tracy5546/dynamic-datasource/content\n    dynamic:\n      # 性能分析插件(有性能损耗 不建议生产环境使用)\n      p6spy: true\n      # 开启seata代理，开启后默认每个数据源都代理，如果某个不需要代理可单独关闭\n      seata: true\n      # 严格模式 匹配不到数据源则报错\n      strict: true\n      hikari:\n        # 最大连接池数量\n        maxPoolSize: 20\n        # 最小空闲线程数量\n        minIdle: 10\n        # 配置获取连接等待超时的时间\n        connectionTimeout: 30000\n        # 校验超时时间\n        validationTimeout: 5000\n        # 空闲连接存活最大时间，默认10分钟\n        idleTimeout: 600000\n        # 此属性控制池中连接的最长生命周期，值0表示无限生命周期，默认30分钟\n        maxLifetime: 1800000\n        # 连接测试query（配置检测连接是否有效）\n        connectionTestQuery: SELECT 1\n        # 多久检查一次连接的活性\n        keepaliveTime: 30000\n\n# seata配置\nseata:\n  # 关闭自动代理\n  enable-auto-data-source-proxy: false\n', 'a0d3b529092a5ce7b1dffdc20a355dc3', '2022-01-09 15:23:00', '2024-05-17 05:35:25', 'nacos', '192.168.12.45', '', 'prod', '数据源配置', '', '', 'yaml', '', ''),
(103, 'webase-gateway.yml', 'DEFAULT_GROUP', '# 安全配置\nsecurity:\n  # 验证码\n  captcha:\n    # 是否开启验证码\n    enabled: true\n    # 验证码类型 math 数组计算 char 字符验证\n    type: MATH\n    # line 线段干扰 circle 圆圈干扰 shear 扭曲干扰\n    category: CIRCLE\n    # 数字验证码位数\n    numberLength: 1\n    # 字符验证码长度\n    charLength: 4\n  # 防止XSS攻击\n  xss:\n    enabled: true\n    excludeUrls:\n      - /system/notice\n  # 不校验白名单\n  ignore:\n    whites:\n      - /code\n      - /auth/logout\n      - /auth/login\n      - /auth/smsLogin\n      - /auth/xcxLogin\n      - /auth/register\n      - /resource/sms/code\n      - /*/v3/api-docs\n      - /csrf\n\nspring:\n  cloud:\n    # 网关配置\n    gateway:\n      # 打印请求日志(自定义)\n      requestLog: true\n      discovery:\n        locator:\n          lowerCaseServiceId: true\n          enabled: true\n      routes:\n        # 认证中心\n        - id: webase-auth\n          uri: lb://webase-auth\n          predicates:\n            - Path=/auth/**\n          filters:\n            # 验证码处理\n            - ValidateCodeFilter\n            - StripPrefix=1\n        # 代码生成\n        - id: webase-gen\n          uri: lb://webase-gen\n          predicates:\n            - Path=/code/**\n          filters:\n            - StripPrefix=1\n        # 系统模块\n        - id: webase-system\n          uri: lb://webase-system\n          predicates:\n            - Path=/system/**\n          filters:\n            - StripPrefix=1\n        # 资源服务\n        - id: webase-resource\n          uri: lb://webase-resource\n          predicates:\n            - Path=/resource/**\n          filters:\n            - StripPrefix=1\n        # 演示服务\n        - id: webase-demo\n          uri: lb://webase-demo\n          predicates:\n            - Path=/demo/**\n          filters:\n            - StripPrefix=1\n        # MQ演示服务\n        - id: webase-stream-mq\n          uri: lb://webase-stream-mq\n          predicates:\n            - Path=/stream-mq/**\n          filters:\n            - StripPrefix=1\n        # 主机管理模块\n        - id: webase-host-mgr\n          uri: lb://webase-host-mgr\n          predicates:\n            - Path=/host-mgr/**\n          filters:\n            - StripPrefix=1\n        # bcos3节点管理模块(v3)\n        - id: bcos3-node-mgr\n          uri: lb://bcos3-node-mgr\n          predicates:\n            - Path=/node-mgr3/**\n          filters:\n            - StripPrefix=1\n        # bcos3签名服务(v3)\n        - id: bcos3-sign\n          uri: lb://bcos3-sign\n          predicates:\n            - Path=/sign3/**\n          filters:\n            - StripPrefix=1\n\n    # sentinel 配置\n    sentinel:\n      filter:\n        enabled: false\n      # nacos配置持久化\n      datasource:\n        ds1:\n          nacos:\n            server-addr: ${spring.cloud.nacos.server-addr}\n            dataId: sentinel-${spring.application.name}.json\n            groupId: ${spring.cloud.nacos.config.group}\n            namespace: ${spring.profiles.active}\n            data-type: json\n            rule-type: gw-flow\n', 'cd5315678ec0a0bee44ab4eff32d9f27', '2022-01-09 15:23:00', '2024-05-14 08:42:34', 'nacos', '192.168.12.45', '', 'prod', '网关模块', '', '', 'yaml', '', ''),
(104, 'webase-auth.yml', 'DEFAULT_GROUP', '# 用户配置\nuser:\n  password:\n    # 密码最大错误次数\n    maxRetryCount: 5\n    # 密码锁定时间（默认10分钟）\n    lockTime: 10\n', '1fd08de287662e81f0ced8808d7b19e6', '2022-01-09 15:23:00', '2024-05-14 08:42:45', 'nacos', '192.168.12.45', '', 'prod', '认证中心', '', '', 'yaml', '', ''),
(105, 'webase-monitor.yml', 'DEFAULT_GROUP', '# 监控中心配置\nspring:\n  security:\n    user:\n      name: webase\n      password: 123456\n  boot:\n    admin:\n      ui:\n        title: WeBASE-Micro服务监控中心\n      discovery:\n        # seata 不具有健康检查的能力 防止报错排除掉\n        ignored-services: webase-seata-server\n', '0af997d7dde993912be7789a7db44421', '2022-01-09 15:23:00', '2024-05-14 08:43:03', 'nacos', '192.168.12.45', '', 'prod', '监控中心', '', '', 'yaml', '', ''),
(106, 'webase-system.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    dynamic:\n      # 设置默认的数据源或者数据源组,默认值即为 master\n      primary: master\n      datasource:\n        # 主库数据源\n        master:\n          type: ${spring.datasource.type}\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: ${datasource.system-master.url}\n          username: ${datasource.system-master.username}\n          password: ${datasource.system-master.password}\n#        oracle:\n#          type: ${spring.datasource.type}\n#          driverClassName: oracle.jdbc.OracleDriver\n#          url: ${datasource.system-oracle.url}\n#          username: ${datasource.system-oracle.username}\n#          password: ${datasource.system-oracle.password}\n#          hikari:\n#            connectionTestQuery: SELECT 1 FROM DUAL\n#        postgres:\n#          type: ${spring.datasource.type}\n#          driverClassName: org.postgresql.Driver\n#          url: ${datasource.system-postgres.url}\n#          username: ${datasource.system-postgres.username}\n#          password: ${datasource.system-postgres.password}\n', 'af9cc9e0afc296c9a9632a4594437437', '2022-01-09 15:23:00', '2024-05-14 08:43:22', 'nacos', '192.168.12.45', '', 'prod', '系统模块', '', '', 'yaml', '', ''),
(107, 'webase-gen.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    dynamic:\n      # 设置默认的数据源或者数据源组,默认值即为 master\n      primary: master\n      datasource:\n        # 主库数据源\n        master:\n          type: ${spring.datasource.type}\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: ${datasource.system-master.url}\n          username: ${datasource.system-master.username}\n          password: ${datasource.system-master.password}\n#        oracle:\n#          type: ${spring.datasource.type}\n#          driverClassName: oracle.jdbc.OracleDriver\n#          url: ${datasource.system-oracle.url}\n#          username: ${datasource.system-oracle.username}\n#          password: ${datasource.system-oracle.password}\n#          hikari:\n#            connectionTestQuery: SELECT 1 FROM DUAL\n#        postgres:\n#          type: ${spring.datasource.type}\n#          driverClassName: org.postgresql.Driver\n#          url: ${datasource.system-postgres.url}\n#          username: ${datasource.system-postgres.username}\n#          password: ${datasource.system-postgres.password}\n\n# 代码生成\ngen:\n  # 作者\n  author: qctc\n  # 默认生成包路径 system 需改成自己的模块名称 如 system monitor tool\n  packageName: com.webank.system\n  # 自动去除表前缀，默认是false\n  autoRemovePre: false\n  # 表前缀（生成类名不会包含表前缀，多个用逗号分隔）\n  tablePrefix: sys_\n', 'c9956ac3ee27aa130433e7bde465e744', '2022-01-09 15:23:00', '2024-05-14 08:43:32', 'nacos', '192.168.12.45', '', 'prod', '代码生成', '', '', 'yaml', '', ''),
(108, 'webase-job.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    dynamic:\n      # 设置默认的数据源或者数据源组,默认值即为 master\n      primary: master\n      datasource:\n        # 主库数据源\n        master:\n          type: ${spring.datasource.type}\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: ${datasource.job.url}\n          username: ${datasource.job.username}\n          password: ${datasource.job.password}\n\nxxl:\n  job:\n    # 执行器开关\n    enabled: true\n    # 调度中心地址：如调度中心集群部署存在多个地址则用逗号分隔。\n    # admin-addresses: http://localhost:9900\n    # 调度中心应用名 通过服务名连接调度中心(启用admin-appname会导致admin-addresses不生效)\n    admin-appname: webase-xxl-job-admin\n    # 执行器通讯TOKEN：非空时启用\n    access-token: xxl-job\n    # 执行器配置\n    executor:\n      # 执行器AppName：执行器心跳注册分组依据；为空则关闭自动注册\n      appname: ${spring.application.name}-executor\n      # 执行器端口号 执行器从19901开始往后写\n      port: 9901\n      # 执行器注册：默认IP:PORT\n      address:\n      # 执行器IP：默认自动获取IP\n      ip:\n      # 执行器运行日志文件存储磁盘路径\n      logpath: ./logs/${spring.application.name}/xxl-job\n      # 执行器日志文件保存天数：大于3生效\n      logretentiondays: 30\n', '425c73fec7f2399c279f2c9402a1101d', '2022-01-09 15:23:00', '2024-05-14 08:43:42', 'nacos', '192.168.12.45', '', 'prod', '定时任务', '', '', 'yaml', '', ''),
(109, 'webase-resource.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    dynamic:\n      # 设置默认的数据源或者数据源组,默认值即为 master\n      primary: master\n      datasource:\n        # 主库数据源\n        master:\n          type: ${spring.datasource.type}\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: ${datasource.system-master.url}\n          username: ${datasource.system-master.username}\n          password: ${datasource.system-master.password}\n#        oracle:\n#          type: ${spring.datasource.type}\n#          driverClassName: oracle.jdbc.OracleDriver\n#          url: ${datasource.system-oracle.url}\n#          username: ${datasource.system-oracle.username}\n#          password: ${datasource.system-oracle.password}\n#          hikari:\n#            connectionTestQuery: SELECT 1 FROM DUAL\n#        postgres:\n#          type: ${spring.datasource.type}\n#          driverClassName: org.postgresql.Driver\n#          url: ${datasource.system-postgres.url}\n#          username: ${datasource.system-postgres.username}\n#          password: ${datasource.system-postgres.password}\n\nmail:\n  enabled: false\n  host: smtp.163.com\n  port: 465\n  # 是否需要用户名密码验证\n  auth: true\n  # 发送方，遵循RFC-822标准\n  from: xxx@163.com\n  # 用户名（注意：如果使用foxmail邮箱，此处user为qq号）\n  user: xxx@163.com\n  # 密码（注意，某些邮箱需要为SMTP服务单独设置密码，详情查看相关帮助）\n  pass: xxxxxxxxxx\n  # 使用 STARTTLS安全连接，STARTTLS是对纯文本通信协议的扩展。\n  starttlsEnable: true\n  # 使用SSL安全连接\n  sslEnable: true\n  # SMTP超时时长，单位毫秒，缺省值不超时\n  timeout: 0\n  # Socket连接超时值，单位毫秒，缺省值不超时\n  connectionTimeout: 0\n\n# sms 短信 支持 阿里云 腾讯云 云片 等等各式各样的短信服务商\n# https://wind.kim/doc/start 文档地址 各个厂商可同时使用\nsms:\n  # 阿里云 dysmsapi.aliyuncs.com\n  alibaba:\n    #请求地址 默认为 dysmsapi.aliyuncs.com 如无特殊改变可以不用设置\n    requestUrl: dysmsapi.aliyuncs.com\n    #阿里云的accessKey\n    accessKeyId: xxxxxxx\n    #阿里云的accessKeySecret\n    accessKeySecret: xxxxxxx\n    #短信签名\n    signature: 测试\n  tencent:\n    #请求地址默认为 sms.tencentcloudapi.com 如无特殊改变可不用设置\n    requestUrl: sms.tencentcloudapi.com\n    #腾讯云的accessKey\n    accessKeyId: xxxxxxx\n    #腾讯云的accessKeySecret\n    accessKeySecret: xxxxxxx\n    #短信签名\n    signature: 测试\n    #短信sdkAppId\n    sdkAppId: appid\n    #地域信息默认为 ap-guangzhou 如无特殊改变可不用设置\n    territory: ap-guangzhou\n', 'e8d6730356e17448950e7e25c2454912', '2022-01-09 15:23:00', '2024-05-14 08:43:52', 'nacos', '192.168.12.45', '', 'prod', '文件服务', '', '', 'yaml', '', ''),
(110, 'sentinel-webase-gateway.json', 'DEFAULT_GROUP', '[\n  {\n    \"resource\": \"webase-auth\",\n    \"count\": 500,\n    \"grade\": 1,\n    \"limitApp\": \"default\",\n    \"strategy\": 0,\n    \"controlBehavior\": 0\n  },\n  {\n    \"resource\": \"webase-system\",\n    \"count\": 1000,\n    \"grade\": 1,\n    \"limitApp\": \"default\",\n    \"strategy\": 0,\n    \"controlBehavior\": 0\n  },\n  {\n    \"resource\": \"webase-resource\",\n    \"count\": 500,\n    \"grade\": 1,\n    \"limitApp\": \"default\",\n    \"strategy\": 0,\n    \"controlBehavior\": 0\n  },\n  {\n    \"resource\": \"webase-host-mgr\",\n    \"count\": 1000,\n    \"grade\": 1,\n    \"limitApp\": \"default\",\n    \"strategy\": 0,\n    \"controlBehavior\": 0\n  }\n]\n', '8219fa46326a8022723ef8fbae70a14f', '2022-01-09 15:23:00', '2024-05-14 08:44:18', 'nacos', '192.168.12.45', '', 'prod', '限流策略', '', '', 'json', '', ''),
(111, 'webase-xxl-job-admin.yml', 'DEFAULT_GROUP', '# server 配置\nspring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: ${datasource.job.url}\n    username: ${datasource.job.username}\n    password: ${datasource.job.password}\n    hikari:\n      auto-commit: true\n      connection-test-query: SELECT 1\n      connection-timeout: 10000\n      idle-timeout: 30000\n      max-lifetime: 900000\n      maximum-pool-size: 30\n      minimum-idle: 10\n      pool-name: HikariCP\n      validation-timeout: 1000\n  mail:\n    from: xxx@qq.com\n    host: smtp.qq.com\n    username: xxx@qq.com\n    password: xxx\n    port: 25\n    properties:\n      mail:\n        smtp:\n          auth: true\n          socketFactory:\n            class: javax.net.ssl.SSLSocketFactory\n          starttls:\n            enable: true\n            required: true\n\n# mybatis 配置\nmybatis:\n  mapper-locations: classpath:/mybatis-mapper/*Mapper.xml\n\n# Actuator 监控端点的配置项\nmanagement:\n  health:\n    mail:\n      enabled: false\n  endpoints:\n    web:\n      exposure:\n        include: \'*\'\n  endpoint:\n    health:\n      show-details: ALWAYS\n    logfile:\n      external-file: ./logs/${spring.application.name}/console.log\n\n# xxljob系统配置\nxxl:\n  job:\n    # 鉴权token\n    accessToken: xxl-job\n    # 国际化\n    i18n: zh_CN\n    # 日志清理\n    logretentiondays: 30\n    triggerpool:\n      fast:\n        max: 200\n      slow:\n        max: 100\n', '0e2612c76e9c75fb10cb69adf076ae55', '2022-01-09 15:21:02', '2024-05-14 08:44:32', 'nacos', '192.168.12.45', '', 'prod', '定时任务控制台', '', '', 'yaml', '', ''),
(112, 'seata-server.properties', 'DEFAULT_GROUP', 'service.vgroupMapping.webase-auth-group=default\nservice.vgroupMapping.webase-system-group=default\nservice.vgroupMapping.webase-resource-group=default\nservice.vgroupMapping.webase-gen-group=default\nservice.vgroupMapping.webase-job-group=default\nservice.vgroupMapping.webase-host-mgr-group=default\n\nservice.enableDegrade=false\nservice.disableGlobalTransaction=false\n\n#Transaction storage configuration, only for the server. The file, DB, and redis configuration values are optional.\nstore.mode=db\nstore.lock.mode=db\nstore.session.mode=db\n#Used for password encryption\nstore.publicKey=\n\n#These configurations are required if the `store mode` is `db`. If `store.mode,store.lock.mode,store.session.mode` are not equal to `db`, you can remove the configuration block.\nstore.db.datasource=hikari\nstore.db.dbType=mysql\nstore.db.driverClassName=com.mysql.cj.jdbc.Driver\nstore.db.url=jdbc:mysql://mysql:3306/webase-seata?useUnicode=true&rewriteBatchedStatements=true&allowPublicKeyRetrieval=true\nstore.db.user=root\nstore.db.password=webase123\nstore.db.minConn=5\nstore.db.maxConn=30\nstore.db.globalTable=global_table\nstore.db.branchTable=branch_table\nstore.db.distributedLockTable=distributed_lock\nstore.db.queryLimit=100\nstore.db.lockTable=lock_table\nstore.db.maxWait=5000\n\n# redis æ¨¡å¼ store.mode=redis å¼å¯ (æ§å¶å°æ¥è¯¢åè½æé,ä¸å½±åå®éæ§è¡åè½)\n# store.redis.host=127.0.0.1\n# store.redis.port=6379\n# æå¤§è¿æ¥æ°\n# store.redis.maxConn=10\n# æå°è¿æ¥æ°\n# store.redis.minConn=1\n# store.redis.database=0\n# store.redis.password=\n# store.redis.queryLimit=100\n\n#Transaction rule configuration, only for the server\nserver.recovery.committingRetryPeriod=1000\nserver.recovery.asynCommittingRetryPeriod=1000\nserver.recovery.rollbackingRetryPeriod=1000\nserver.recovery.timeoutRetryPeriod=1000\nserver.maxCommitRetryTimeout=-1\nserver.maxRollbackRetryTimeout=-1\nserver.rollbackRetryTimeoutUnlockEnable=false\nserver.distributedLockExpireTime=10000\nserver.xaerNotaRetryTimeout=60000\nserver.session.branchAsyncQueueSize=5000\nserver.session.enableBranchAsyncRemove=false\n\n#Transaction rule configuration, only for the client\nclient.rm.asyncCommitBufferLimit=10000\nclient.rm.lock.retryInterval=10\nclient.rm.lock.retryTimes=30\nclient.rm.lock.retryPolicyBranchRollbackOnConflict=true\nclient.rm.reportRetryCount=5\nclient.rm.tableMetaCheckEnable=true\nclient.rm.tableMetaCheckerInterval=60000\nclient.rm.sqlParserType=druid\nclient.rm.reportSuccessEnable=false\nclient.rm.sagaBranchRegisterEnable=false\nclient.rm.sagaJsonParser=fastjson\nclient.rm.tccActionInterceptorOrder=-2147482648\nclient.tm.commitRetryCount=5\nclient.tm.rollbackRetryCount=5\nclient.tm.defaultGlobalTransactionTimeout=60000\nclient.tm.degradeCheck=false\nclient.tm.degradeCheckAllowTimes=10\nclient.tm.degradeCheckPeriod=2000\nclient.tm.interceptorOrder=-2147482648\nclient.undo.dataValidation=true\nclient.undo.logSerialization=jackson\nclient.undo.onlyCareUpdateColumns=true\nserver.undo.logSaveDays=7\nserver.undo.logDeletePeriod=86400000\nclient.undo.logTable=undo_log\nclient.undo.compress.enable=true\nclient.undo.compress.type=zip\nclient.undo.compress.threshold=64k\n\n#For TCC transaction mode\ntcc.fence.logTableName=tcc_fence_log\ntcc.fence.cleanPeriod=1h\n\n#Log rule configuration, for client and server\nlog.exceptionRate=100\n\n#Metrics configuration, only for the server\nmetrics.enabled=false\nmetrics.registryType=compact\nmetrics.exporterList=prometheus\nmetrics.exporterPrometheusPort=9898\n\n#For details about configuration items, see https://seata.io/zh-cn/docs/user/configurations.html\n#Transport configuration, for client and server\ntransport.type=TCP\ntransport.server=NIO\ntransport.heartbeat=true\ntransport.enableTmClientBatchSendRequest=false\ntransport.enableRmClientBatchSendRequest=true\ntransport.enableTcServerBatchSendResponse=false\ntransport.rpcRmRequestTimeout=30000\ntransport.rpcTmRequestTimeout=30000\ntransport.rpcTcRequestTimeout=30000\ntransport.threadFactory.bossThreadPrefix=NettyBoss\ntransport.threadFactory.workerThreadPrefix=NettyServerNIOWorker\ntransport.threadFactory.serverExecutorThreadPrefix=NettyServerBizHandler\ntransport.threadFactory.shareBossWorker=false\ntransport.threadFactory.clientSelectorThreadPrefix=NettyClientSelector\ntransport.threadFactory.clientSelectorThreadSize=1\ntransport.threadFactory.clientWorkerThreadPrefix=NettyClientWorkerThread\ntransport.threadFactory.bossThreadSize=1\ntransport.threadFactory.workerThreadSize=default\ntransport.shutdown.wait=3\ntransport.serialization=seata\ntransport.compressor=none\n', 'b63bf69e447e48070b3ac9d8ad870715', '2022-01-09 15:21:02', '2024-05-14 08:44:48', 'nacos', '192.168.12.45', '', 'prod', 'seata配置文件', '', '', 'properties', '', ''),
(113, 'webase-sentinel-dashboard.yml', 'DEFAULT_GROUP', 'spring:\n  mvc:\n    pathmatch:\n      # 修复 sentinel 控制台未适配 springboot 2.6 新路由方式\n      matching-strategy: ANT_PATH_MATCHER\n\nserver:\n  servlet:\n    encoding:\n      force: true\n      charset: UTF-8\n      enabled: true\n    session:\n      cookie:\n        name: sentinel_dashboard_cookie\n\nlogging:\n  level:\n    org.springframework.web: INFO\n\nauth:\n  enabled: true\n  filter:\n    exclude-urls: /,/auth/login,/auth/logout,/registry/machine,/version,/actuator,/actuator/**\n    exclude-url-suffixes: htm,html,js,css,map,ico,ttf,woff,png\n  username: sentinel\n  password: sentinel\n', '59055747c62f08cd2c38a6016d4b9227', '2022-01-09 15:21:02', '2024-05-14 08:45:04', 'nacos', '192.168.12.45', '', 'prod', 'sentinel控制台配置文件', '', '', 'yaml', '', ''),
(114, 'webase-host-mgr.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    dynamic:\n      # 设置默认的数据源或者数据源组,默认值即为 master\n      primary: master\n      datasource:\n        # 主库数据源\n        master:\n          type: ${spring.datasource.type}\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          url: ${datasource.host-master.url}\n          username: ${datasource.host-master.username}\n          password: ${datasource.host-master.password}\n', '29579e422663982a3f15f10ba02724a4', '2022-01-09 15:23:00', '2024-05-14 08:45:15', 'nacos', '192.168.12.45', '', 'prod', '主机管理模块', '', '', 'yaml', '', ''),
(117, 'bcos3-node-mgr.yml', 'DEFAULT_GROUP', 'spring:\n  datasource:\n    #    type: ${spring.datasource.type}\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: ${datasource.bcos3-node-master.url}\n    username: ${datasource.bcos3-node-master.username}\n    password: ${datasource.bcos3-node-master.password}\n    initialSize: 10\n    minIdle: 5\n    maxActive: 30\n  aop:\n    proxy-target-class: true\n  mvc:\n    pathmatch:\n      matching-strategy: ant_path_matcher\n\n#mybatis config\nmybatis:\n  configuration:\n    map-underscore-to-camel-case: true\n  typeAliasesPackage: com.webank.webase.node.mgr\n  mapperLocations: classpath:mapper/*.xml\n\n#log config\nlogging:\n  config: classpath:log/log4j2.xml\n  level:\n    com.webank.webase.node.mgr: info\n\n#constants\nconstant:\n  ###http request\n  # login\'s authorization whether enable, if false, default login as `admin` account\n  # WARN!! disabled authorization is unsafe in public internet\n  isUseSecurity: true\n  # verification code expire time (s)\n  verificationCodeMaxAge: 300\n  # if disabled as false, code would be constant value\n  # WARN!! disabled random verification code is unsafe in public internet\n  enableVerificationCode: true\n  # verification code constant value, only when enableVerificationCode is false works\n  verificationCodeValue: \"8888\"\n  # auth token code expire time (s)\n  authTokenMaxAge: 3600\n  ignoreCheckFront: /account/login,/account/pictureCheckCode,/login,/user/privateKey,/front/new,/front/refresh,/front/find,/config/version,/group/all/invalidIncluded,/swagger-ui.html,/account/register,/account/mail,/account/mail/*,/account/privacy\n  ###front http request\n  frontUrl: http://%1s:%2d/WeBASE-Front/%3s\n  httpTimeOut: 15000\n  contractDeployTimeOut: 30000\n  maxRequestFail: 3\n  sleepWhenHttpMaxFail: 60000\n\n  ###common\n  developerModeEnable: true\n  deployedModifyEnable: true\n  isDeleteInfo: true\n  transRetainMax: 10000\n  deleteInfoCron: \"*/15 * * * * ?\"\n  statisticsTransDailyCron: \"0 0/1 * * * ?\"\n  resetGroupListCycle: 600000\n  groupInvalidGrayscaleValue: 1M    # y:year, M:month, d:day of month, h:hour, m:minute, n:forever valid\n  notSupportFrontIp:\n\n  ###application integration\n  # app request timestamp timeout (ms)\n  appRequestTimeOut: 300000\n  appStatusCheckCycle: 3000\n\n  ###block info (pulling data from chain)\n  isBlockPullFromZero: false\n  pullBlockInitCnts: 1000\n  pullBlockSleepTime: 200\n  pullBlockTaskFixedDelay: 30000\n  blockRetainMax: 5000\n  ###transaction monitor\n  transMonitorTaskFixedRate: 60000  #How long does it take to start the next task after the end (second)\n  analysisSleepTime: 200\n  monitorInfoRetainMax: 10000\n  isMonitorIgnoreUser: false\n  isMonitorIgnoreContract: false\n  # if abnormal contract, abnormal user reach the max count, stop monitor\n  monitorUnusualMaxCount: 20\n  ###alert mail monitor task interval: 5mins unit: ms\n  auditMonitorTaskFixedDelay: 300000\n  nodeStatusMonitorTaskFixedDelay: 60000  #must larger than @pullBlockTaskFixedDelay\n  certMonitorTaskFixedDelay: 300000\n  permitUrlArray: /account/login,/account/pictureCheckCode,/login,/user/privateKey/**,/config/encrypt,/config/auth,/config/version,/front/refresh,/api/*,/auth/base/available,/account/register,/account/mail,/account/mail/*,/account/privacy\n  ###interval to async refresh group list locally\n  resetGroupListInterval: 15000\n  ###interval block statistic, unit: ms\n  statBlockRetainMax: 100000\n  statBlockFixedDelay: 10000\n  statBlockPageSize: 20 # block stat data to pull in one time\n  enableExternalFromBlock: true # enable record account and contract from block\n  ###enable user register and mail second check\n  enableRegisterMailCheck: false\n  # SMTP服务用于发送验证码，默认端口为25，暂未支持SSL/TLS（若启用SMTP SSL或TLS则465或587端口）\n  smtpHost: smtp.qq.com\n  smtpPort: 25\n  smtpUsername: \"yourmail@qq.com\"\n  smtpPassword: \"yourMailPassword\"\n  accountInfoAesKey: b1eab1c216de9746\n\n  #### visual deploy\n  #### deployType 部署方式：\n  # 0, 先使用 build_chain.sh 部署链并启用 WeBASE-Front 服务，然后手动添加前置;\n  # 1, 使用可视化部署, 需要参考WeBASE文档填写下面参数\n  deployType: 1\n  #### if deployType = 0, ignore below properties ####\n  # 镜像名\n  dockerRepository: \"fiscoorg/fisco-webase-v3\"\n  # WeBASE-Sign 访问地址，供节点前置访问，不能填写localhost或127.0.0.1，填写nginx开放的签名服务地址\n  webaseSignAddress: \"http://192.168.12.180/WeBASE-Sign\"\n  # 可视化操作的后台超时时间 (unit: ms)，若机器较慢，可动态设置超时时间\n  execDockerCheckTimeout: 55000\n  execHostCheckTimeout: 55000\n  execHostCheckPortTimeout: 50000\n  execHostInitTimeout: 300000\n  execHostConfigTimeout: 40000\n  execBuildChainTimeout: 40000\n  dockerRestartPeriodTime: 30000\n  execShellTimeout: 600000\n  execScpTimeout: 10000\n  execAddNodeTimeout: 40000\n  # runDockerSleepTime: 600000\n  #### if deployType = 0, ignore upper properties ####\n\n\nsdk:\n  # 加密类型：0: 非国密;  1: 国密\n  ## 可视化部署时，此配置将决定部署国密或非国密链\n  ## 国密与非国密链的私钥、合约数据不兼容\n  encryptType: 1\n\n# executor config for async pulling data from chain\nexecutor:\n  corePoolSize: 10\n  maxPoolSize: 20\n  queueSize: 50\n  threadNamePrefix: \"node-mgr-async-\"\n\n# scheduler config for sync scheduled task\nscheduler:\n  poolSize: 30\n  threadNamePrefix: \"node-mgr-task-\"\n  awaitTerminationSeconds: 600\n  waitForTasksToCompleteOnShutdown: true\n', 'dec4df4570b7773047da945d767cc070', '2022-01-09 15:23:00', '2024-05-17 07:45:18', 'nacos', '192.168.12.45', '', 'prod', 'bcos3.x 节点管理模块', '', '', 'yaml', '', ''),
(118, 'bcos3-sign.yml', 'DEFAULT_GROUP', 'spring:\n  cache:\n    type: simple\n  datasource:\n    # type: ${spring.datasource.type}\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: ${datasource.bcos3-sign-master.url}\n    username: ${datasource.bcos3-sign-master.username}\n    password: ${datasource.bcos3-sign-master.password}\n    initialSize: 10\n    minIdle: 5\n    maxActive: 30\n  # fix swagger\n  mvc:\n    pathmatch:\n      matching-strategy: ant_path_matcher\n\nconstant:\n  # aes加密key（16位）\n  aesKey: EfdsW23D23d3df43\n  # aes加密模式 v1.4.0+ 默认CBC（v1.4.0前默认为ECB）\n  aesPattern: CBC\n  keepAliveRequests: 100\n  KeepAliveTimeout: 30000\n  syncUsrCacheTaskFixedDelay: 10000\n  # 返回值是否支持私钥传输\n  supportPrivateKeyTransfer: true\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n\nlogging:\n  config: classpath:log4j2.xml\n  level:\n    com.webank.webase.sign: info\n', 'a5a0b42d966d8bb917dee412ed88759c', '2022-01-09 15:23:00', '2024-05-14 08:45:46', 'nacos', '192.168.12.45', '', 'prod', 'bcos3.x 签名模块', '', '', 'yaml', '', '');

/******************************************/
/*   表名称 = config_info_aggr   */
/******************************************/
CREATE TABLE `config_info_aggr` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) NOT NULL COMMENT 'data_id',
  `group_id` varchar(255) NOT NULL COMMENT 'group_id',
  `datum_id` varchar(255) NOT NULL COMMENT 'datum_id',
  `content` longtext NOT NULL COMMENT '内容',
  `gmt_modified` datetime NOT NULL COMMENT '修改时间',
  `app_name` varchar(128) DEFAULT NULL,
  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='增加租户字段';


/******************************************/
/*   表名称 = config_info_beta   */
/******************************************/
CREATE TABLE `config_info_beta` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) NOT NULL COMMENT 'group_id',
  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',
  `content` longtext NOT NULL COMMENT 'content',
  `beta_ips` varchar(1024) DEFAULT NULL COMMENT 'betaIps',
  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',
  `src_user` text COMMENT 'source user',
  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',
  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',
  `encrypted_data_key` text COMMENT '秘钥',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_beta';

/******************************************/
/*   表名称 = config_info_tag   */
/******************************************/
CREATE TABLE `config_info_tag` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) NOT NULL COMMENT 'group_id',
  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',
  `tag_id` varchar(128) NOT NULL COMMENT 'tag_id',
  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',
  `content` longtext NOT NULL COMMENT 'content',
  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',
  `src_user` text COMMENT 'source user',
  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_tag';

/******************************************/
/*   表名称 = config_tags_relation   */
/******************************************/
CREATE TABLE `config_tags_relation` (
  `id` bigint(20) NOT NULL COMMENT 'id',
  `tag_name` varchar(128) NOT NULL COMMENT 'tag_name',
  `tag_type` varchar(64) DEFAULT NULL COMMENT 'tag_type',
  `data_id` varchar(255) NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) NOT NULL COMMENT 'group_id',
  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',
  `nid` bigint(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`nid`),
  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),
  KEY `idx_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_tag_relation';

/******************************************/
/*   表名称 = group_capacity   */
/******************************************/
CREATE TABLE `group_capacity` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `group_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Group ID，空字符表示整个集群',
  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',
  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',
  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',
  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数，，0表示使用默认值',
  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',
  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_group_id` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='集群、各Group容量信息表';

/******************************************/
/*   表名称 = his_config_info   */
/******************************************/
CREATE TABLE `his_config_info` (
  `id` bigint(64) unsigned NOT NULL,
  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `data_id` varchar(255) NOT NULL,
  `group_id` varchar(128) NOT NULL,
  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',
  `content` longtext NOT NULL,
  `md5` varchar(32) DEFAULT NULL,
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `src_user` text,
  `src_ip` varchar(50) DEFAULT NULL,
  `op_type` char(10) DEFAULT NULL,
  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',
  `encrypted_data_key` text COMMENT '秘钥',
  PRIMARY KEY (`nid`),
  KEY `idx_gmt_create` (`gmt_create`),
  KEY `idx_gmt_modified` (`gmt_modified`),
  KEY `idx_did` (`data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='多租户改造';


/******************************************/
/*   数据库全名 = nacos_config   */
/*   表名称 = tenant_capacity   */
/******************************************/
CREATE TABLE `tenant_capacity` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `tenant_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Tenant ID',
  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',
  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',
  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',
  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数',
  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',
  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',
  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='租户容量信息表';


CREATE TABLE `tenant_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `kp` varchar(128) NOT NULL COMMENT 'kp',
  `tenant_id` varchar(128) default '' COMMENT 'tenant_id',
  `tenant_name` varchar(128) default '' COMMENT 'tenant_name',
  `tenant_desc` varchar(256) DEFAULT NULL COMMENT 'tenant_desc',
  `create_source` varchar(32) DEFAULT NULL COMMENT 'create_source',
  `gmt_create` bigint(20) NOT NULL COMMENT '创建时间',
  `gmt_modified` bigint(20) NOT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),
  KEY `idx_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='tenant_info';

insert into tenant_info(id, kp, tenant_id, tenant_name, tenant_desc, create_source, gmt_create, gmt_modified) values
(1, '1', 'dev', 'dev', '开发环境', NULL, 1641741261189, 1641741261189),
(2, '1', 'prod', 'prod', '生产环境', NULL, 1641741270448, 1641741287236);

CREATE TABLE `users` (
	`username` varchar(50) NOT NULL PRIMARY KEY,
	`password` varchar(500) NOT NULL,
	`enabled` boolean NOT NULL
);

CREATE TABLE `roles` (
	`username` varchar(50) NOT NULL,
	`role` varchar(50) NOT NULL,
	UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE
);

CREATE TABLE `permissions` (
    `role` varchar(50) NOT NULL,
    `resource` varchar(255) NOT NULL,
    `action` varchar(8) NOT NULL,
    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE
);

INSERT INTO users (username, password, enabled) VALUES ('nacos', '$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu', TRUE);

INSERT INTO roles (username, role) VALUES ('nacos', 'ROLE_ADMIN');
